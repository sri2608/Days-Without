<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Days Without</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #F7F4EF;
    --ink: #1A1A18;
    --muted: #8A8780;
    --accent: #C4593A;
    --card: #FFFFFF;
    --border: #E2DDD7;
    --success: #4A7C59;
  }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--ink);
    min-height: 100vh;
    padding: 2rem 1rem;
  }

  header {
    text-align: center;
    margin-bottom: 3rem;
  }

  header h1 {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(2rem, 6vw, 3.5rem);
    letter-spacing: -0.02em;
    line-height: 1;
  }

  header p {
    color: var(--muted);
    font-size: 0.9rem;
    margin-top: 0.5rem;
    font-weight: 300;
  }

  .container {
    max-width: 560px;
    margin: 0 auto;
  }

  /* Add form */
  .add-form {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 2rem;
  }

  .add-form input {
    flex: 1;
    padding: 0.75rem 1rem;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    background: var(--card);
    font-family: inherit;
    font-size: 0.95rem;
    color: var(--ink);
    outline: none;
    transition: border-color 0.2s;
  }

  .add-form input:focus { border-color: var(--ink); }
  .add-form input::placeholder { color: var(--muted); }

  .add-form button {
    padding: 0.75rem 1.25rem;
    background: var(--ink);
    color: white;
    border: none;
    border-radius: 10px;
    font-family: inherit;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: opacity 0.2s;
    white-space: nowrap;
  }

  .add-form button:hover { opacity: 0.8; }

  /* Cards */
  .cards { display: flex; flex-direction: column; gap: 1rem; }

  .card {
    background: var(--card);
    border: 1.5px solid var(--border);
    border-radius: 16px;
    padding: 1.25rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 1.25rem;
    animation: slideIn 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .card::before {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 4px;
    background: var(--success);
    border-radius: 16px 0 0 16px;
  }

  .card.reset-flash::before { background: var(--accent); }

  @keyframes slideIn {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .counter {
    text-align: center;
    min-width: 60px;
  }

  .counter .num {
    font-family: 'DM Serif Display', serif;
    font-size: 2.2rem;
    line-height: 1;
    color: var(--ink);
  }

  .counter .label {
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--muted);
    margin-top: 2px;
  }

  .divider {
    width: 1px;
    height: 40px;
    background: var(--border);
  }

  .info { flex: 1; }

  .info .name {
    font-size: 1rem;
    font-weight: 500;
  }

  .info .since {
    font-size: 0.8rem;
    color: var(--muted);
    margin-top: 2px;
  }

  .actions { display: flex; gap: 0.5rem; }

  .btn-reset, .btn-delete {
    padding: 0.4rem 0.7rem;
    border-radius: 8px;
    border: 1.5px solid var(--border);
    background: none;
    font-family: inherit;
    font-size: 0.78rem;
    cursor: pointer;
    transition: all 0.15s;
  }

  .btn-reset { color: var(--accent); }
  .btn-reset:hover { background: var(--accent); color: white; border-color: var(--accent); }

  .btn-delete { color: var(--muted); }
  .btn-delete:hover { background: var(--ink); color: white; border-color: var(--ink); }

  .empty {
    text-align: center;
    color: var(--muted);
    padding: 3rem 1rem;
    font-size: 0.95rem;
    font-style: italic;
  }

  .empty span {
    display: block;
    font-size: 2rem;
    margin-bottom: 0.75rem;
  }
</style>
</head>
<body>

<div class="container">
  <header>
    <h1>Days Without</h1>
    <p>Track your streaks, one honest day at a time.</p>
  </header>

  <div class="add-form">
    <input type="text" id="input" placeholder="e.g. smoking, junk food, procrastinatingâ€¦" maxlength="50">
    <button onclick="addTracker()">+ Add</button>
  </div>

  <div class="cards" id="cards"></div>
</div>

<script>
  const STORAGE_KEY = 'days-without-trackers';

  function load() {
    try { return JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; }
    catch { return []; }
  }

  function save(data) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
  }

  function daysSince(dateStr) {
    const start = new Date(dateStr);
    const now = new Date();
    const diff = Math.floor((now - start) / (1000 * 60 * 60 * 24));
    return diff;
  }

  function formatDate(dateStr) {
    return new Date(dateStr).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
  }

  function render() {
    const data = load();
    const container = document.getElementById('cards');

    if (data.length === 0) {
      container.innerHTML = `<div class="empty"><span>ðŸŒ¿</span>Nothing tracked yet.<br>Add something you want to go without.</div>`;
      return;
    }

    container.innerHTML = data.map((item, i) => {
      const days = daysSince(item.since);
      return `
        <div class="card" id="card-${i}">
          <div class="counter">
            <div class="num">${days}</div>
            <div class="label">${days === 1 ? 'day' : 'days'}</div>
          </div>
          <div class="divider"></div>
          <div class="info">
            <div class="name">Without ${item.name}</div>
            <div class="since">Since ${formatDate(item.since)}</div>
          </div>
          <div class="actions">
            <button class="btn-reset" onclick="reset(${i})">Reset</button>
            <button class="btn-delete" onclick="remove(${i})">âœ•</button>
          </div>
        </div>
      `;
    }).join('');
  }

  function addTracker() {
    const input = document.getElementById('input');
    const name = input.value.trim();
    if (!name) return;

    const data = load();
    data.unshift({ name, since: new Date().toISOString() });
    save(data);
    input.value = '';
    render();
  }

  function reset(i) {
    const data = load();
    data[i].since = new Date().toISOString();
    save(data);
    render();
    const card = document.getElementById(`card-${i}`);
    if (card) {
      card.classList.add('reset-flash');
      setTimeout(() => card.classList.remove('reset-flash'), 800);
    }
  }

  function remove(i) {
    const data = load();
    data.splice(i, 1);
    save(data);
    render();
  }

  document.getElementById('input').addEventListener('keydown', e => {
    if (e.key === 'Enter') addTracker();
  });

  render();
</script>
</body>
</html>
